model ExternalLandlord {
  id            String                 @id @default(cuid())
  createdAt     DateTime               @default(now())
  updatedAt     DateTime               @updatedAt
  name          String
  contactNumber String
  emailAddress  String
  referenceForm LandlordReferenceForm?
}

model LandlordReferenceForm {
  id                        String                  @id @default(cuid())
  createdAt                 DateTime                @default(now())
  updatedAt                 DateTime                @updatedAt
  status                    ReferenceStatus         @default(PENDING)
  TenancyReferenceHistoryId String                  @unique
  externalLandlordId        String                  @unique
  conductId                 String                  @unique
  additionalComments        String?
  signerName                String?
  signature                 String?
  signedDate                DateTime                @default(now())
  applicationId             String                  @unique
  tenancyReferenceHistory   TenancyReferenceHistory @relation(fields: [TenancyReferenceHistoryId], references: [id])
  application               application             @relation(fields: [applicationId], references: [id])
  conduct                   TenantConduct           @relation(fields: [conductId], references: [id])
  externalLandlord          ExternalLandlord        @relation(fields: [externalLandlordId], references: [id])
}

model TenancyReferenceHistory {
  id               String                 @id @default(cuid())
  createdAt        DateTime               @default(now())
  updatedAt        DateTime               @updatedAt
  tenantName       String
  currentAddress   String
  monthlyRent      String?
  rentStartDate    DateTime?
  rentEndDate      DateTime?
  reasonForLeaving String?
  referenceForm    LandlordReferenceForm?
}

model TenantConduct {
  id                       String                 @id @default(cuid())
  createdAt                DateTime               @default(now())
  updatedAt                DateTime               @updatedAt
  rentOnTime               Boolean?
  rentOnTimeDetails        String?
  rentArrears              Boolean?
  rentArrearsDetails       String?
  propertyCondition        Boolean?
  propertyConditionDetails String?
  complaints               Boolean?
  complaintsDetails        String?
  endCondition             Boolean?
  endConditionDetails      String?
  rentAgain                Boolean?
  rentAgainDetails         String?
  referenceForm            LandlordReferenceForm?
}

model GuarantorAgreement {
  id                      String               @id @default(cuid())
  createdAt               DateTime             @default(now())
  updatedAt               DateTime             @updatedAt
  status                  String               @default("DRAFT")
  submittedAt             DateTime?
  title                   String?
  firstName               String
  middleName              String?
  lastName                String
  dateOfBirth             DateTime
  nationalInsuranceNumber String?
  contactNumber           String
  emailAddress            String
  guarantorId             String               @unique
  guarantorEmployment     Json?
  signedByGuarantor       Boolean              @default(false)
  guarantorSignature      String?
  guarantorSignedAt       DateTime?
  applicationId           String               @unique
  application             application          @relation(fields: [applicationId], references: [id])
  guarantor               guarantorInformation @relation(fields: [guarantorId], references: [id])
  documents               propertyDocument[]
}

model EmployeeReferenceForm {
  id                         String      @id @default(cuid())
  employeeName               String?
  jobTitle                   String?
  department                 String?
  employmentStartDate        DateTime?
  employmentEndDate          DateTime?
  reasonForLeaving           String?
  companyName                String?
  refereeName                String?
  refereePosition            String?
  contactNumber              String?
  emailAddress               String?
  employmentType             String?
  mainResponsibilities       String?
  workPerformance            Int?
  punctualityAttendance      Int?
  reliabilityProfessionalism Int?
  teamworkInterpersonal      Int?
  wouldReemploy              Boolean?
  reemployDetails            String?
  additionalComments         String?
  declarationConfirmed       Boolean     @default(true)
  signerName                 String?
  signature                  String?
  date                       DateTime?
  applicationId              String      @unique
  application                application @relation(fields: [applicationId], references: [id])
}

enum ReferenceStatus {
  PENDING
  COMPLETED
  DRAFT
  SUBMITTED
  APPROVED
  REJECTED
}

enum EmploymentType {
  EMPLOYED
  SELF_EMPLOYED
  FREELANCE
  DIRECTOR
  SOLE_PROPRIETOR
}
