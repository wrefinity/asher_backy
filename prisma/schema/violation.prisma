model violation {
  id             String             @id @default(cuid())
  actionTaken    String?
  noticeType     NoticeType?
  deliveryMethod DeliveryMethod?
  description    String
  severityLevel  SeverityLevel?     @default(LOW)
  propertyId     String?
  tenantId       String?
  createdById    String?
  unitId         String?
  isDeleted      Boolean            @default(false)
  dueDate        DateTime?
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  amount         Decimal?           @default(0.00) @db.Decimal(18, 2)
  user           users?             @relation("users", fields: [createdById], references: [id])
  property       properties?        @relation("violations", fields: [propertyId], references: [id])
  tenant         tenants?           @relation("tenant", fields: [tenantId], references: [id])
  unit           UnitConfiguration? @relation(fields: [unitId], references: [id])
}

model TenantLeaseBreach {
  id             String          @id @default(cuid())
  tenantId       String
  propertyId     String
  breachType     LeaseBreachType
  description    String
  date           DateTime        @default(now())
  resolved       Boolean         @default(false)
  repeatOffense  Boolean         @default(false)
  resolutionDate DateTime?
  penaltyAmount  Decimal?        @db.Decimal(10, 2)
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  property       properties      @relation(fields: [propertyId], references: [id])
  tenant         tenants         @relation(fields: [tenantId], references: [id])

  @@index([tenantId, propertyId])
}

enum SeverityLevel {
  LOW
  MODERATE
  SEVERE
  CRITICAL
  EXTREME
}

enum NoticeType {
  LEASE_EVICTION
  PAY_OR_OUT
  OTHER
}

enum DeliveryMethod {
  IN_PERSON
  CERTIFIED_MAIL
  PROPERTY_POSTING
  EMAIL
  PROCESS_SERVER
}

enum ViolationStatus {
  PENDING
  ESCALATED
  DELIVERED
}

enum LeaseBreachType {
  SUBLETTING
  ILLEGAL_ACTIVITY
  UNAUTHORIZED_BUSINESS
  UNAUTHORIZED_OCCUPANT
  PROPERTY_DAMAGE
  SMOKING_VIOLATION
  NOISE_VIOLATION
  PARKING_VIOLATION
  TRASH_VIOLATION
  UNAUTHORIZED_PET
  LATE_PAYMENT
  GUEST_VIOLATION
  INSURANCE_LAPSE
  MAINTENANCE_NEGLECT
  OTHER
}
